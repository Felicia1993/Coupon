
# 优惠券项目
## 基于优惠券系统的需求分析
### 1.对外接口、协议：dubbo
## 2.接口内容
  优惠券列表接口 缓存更新机制（1.每个5分钟刷新最新的优惠券列表 2.定时更新）  

  领取优惠券接口 生成券码、券码唯一，雪花算法  

  获取用户当前拥有的优惠券 基于用户级别做缓存  

  优惠券核销接口 接受订单系统发来的结算信息  

  
mysql设计遵守的公式  

1.字段长度 能使用int就不要用varchar，char能用varchar就不要使用varchar(256)  

2.字段选择 固定长度的类型最好使用char， 能使用tinyint就不要使用int  

3.默认值 最好给每个字段一个默认值，最好不为null，即not null default  

4.适当索引 为每个表创建默认索引
## 分布式系统RPC远程调用协议
### RPC是什么  

RPC是指远程过程调用，也就是两台服务器A、B，一个应用部署在A上，想要调用B服务器上应用提供的函数/方法, 需要通过网络来表达调用的寓意和传达调用的数据 

### RPC怎么做 
连接：通过在客户端和服务器之间建立TCP连接，远程过程调用的所有较好的数据都Z这个连接里传输 

寻址：A服务器上的应用怎么告诉底层的TPC框架，如何连接到B服务器（如主机IP地址）以及特定的端口 

编码：网络协议是基于二进制的，内存中的参数的值要序列化成二进制的形式，也就是序列化(Serialize)或编辑（marshai), 通过寻址和传输将序列化的二进制发送给B服务器 

处理返回值：返回值还要发哦是哪个会服务器A上的应用，也要经过序列化的方式发送，服务器A接到后，再反序列化，恢复为内存中的表达方式，交给A服务器上的应用 

RPC的协议有很多，比如最早的CORBA，java RMI，Web Service的RPC风格，Hessian，Thrift，甚至Rest API



